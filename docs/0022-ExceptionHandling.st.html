<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <title>Smalltalk76/ExceptionHandling.st</title>
	<link rel="stylesheet" type="text/css" href="font.css"/>
  </head>
  <body>
    <div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small">&rsquo;From Smalltalk 5.5k XM November 24 on 22 November 1980 at 2:57:08 am.&rsquo;<br></span></div>
<div style="width: 141pt; margin-left: 425pt; margin-top: 0pt; text-align: left">
<span class="medium bold">"ExceptionHandler"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="medium bold">Class new title: &rsquo;ExceptionHandler&rsquo;<br></span><span class="tab" val="79"></span><span class="medium bold">subclassof: Object<br></span><span class="tab" val="79"></span><span class="medium bold">fields: &rsquo; <br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="medium bold">fDoContext<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="medium bold">fCode<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="medium bold">fTrapCode<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="medium bold">fTrapCondition<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="medium bold">fResult<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="medium bold">fPostTrapIndicator<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="medium bold">fStatusIndicator<br></span><span class="tab" val="79"></span><span class="medium bold">&rsquo;<br></span><span class="tab" val="79"></span><span class="medium bold">declare: &rsquo;&rsquo;;<br></span><span class="tab" val="79"></span><span class="medium bold">asFollows</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small italic"><br>EXCEPTION HANDLER  J.C. Althoff  7/79</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="medium bold"><br>DOCUMENTATION</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: justify">
<span class="small bold">description<br></span><span class="small">[<br>"</span><span class="small monospace"><br>This class provides some exception handling capabilities that can be used in a variety of applications.  It is intended to be used in the following way:<br><br>1. An ExceptionHandler object is created to supervise the execution of a block of statements.<br></span><span class="tab" val="79"></span><span class="small">EH &larr; ExceptionHandler new.</span><span class="small monospace"><br>2. Each object that is capable of detecting an exception is informed of the existence of the ExceptionHandler object.<br></span><span class="tab" val="79"></span><span class="small">dpj exceptionHandler: EH.</span><span class="small monospace"><br>3. The ExceptionHandler object is then sent the message </span><span class="small">&rsquo;do⦂ pCode onTrapDo⦂ pTrapCode&rsquo;</span><span class="small monospace">.  The parameter </span><span class="small">pCode</span><span class="small monospace"> is a block of statements that is to be supervised by the ExceptionHandler object.  The parameter </span><span class="small">pTrapCode</span><span class="small monospace"> is a block of statements that is to be executed whenever an exception is detected.<br></span><span class="tab" val="79"></span><span class="small">EH do⦂ [ ... ] onTrapDo⦂ [ ... ].</span><span class="small monospace"><br>4. When an exception is detected during the execution of one of the statements in </span><span class="small">pCode</span><span class="small monospace"> the message </span><span class="small">&rsquo;trap&rsquo;</span><span class="small monospace"> can be sent to the ExceptionHandler object which will then take control.  If information about the exception is available, it can be relayed by sending the message </span><span class="small">&rsquo;trap:&rsquo;</span><span class="small monospace"> with the information specified as the parameter.<br></span><span class="tab" val="79"></span><span class="small">EH trap. </span><span class="small monospace"> (or)  </span><span class="small">EH trap: information.</span><span class="small monospace"><br>5. When the ExceptionHandler object gets control it saves the parameter if one was sent, then executes </span><span class="small">pTrapCode</span><span class="small monospace">.  The saved parameter can be retrieved by sending the message </span><span class="small">&rsquo;trapCondition&rsquo;</span><span class="small monospace">.  The statements in </span><span class="small">pTrapCode</span><span class="small monospace"> should take any actions necessary to handle the exception. Messages can be included in </span><span class="small">pTrapCode</span><span class="small monospace"> that tell the ExceptionHandler object what to do when </span><span class="small">pTrapCode</span><span class="small monospace"> completes.  The available messages are:<br></span><span class="tab" val="79"></span><span class="small monospace">5.1 </span><span class="small">&rsquo;restart&rsquo;</span><span class="small monospace"> which restarts the execution of </span><span class="small">pCode</span><span class="small monospace">,<br></span><span class="tab" val="79"></span><span class="small monospace">5.2 </span><span class="small">&rsquo;continue&rsquo;</span><span class="small monospace"> which continues </span><span class="small">pCode</span><span class="small monospace"> at the point at which </span><span class="small">&rsquo;trap&rsquo; </span><span class="small monospace">was sent,<br></span><span class="tab" val="79"></span><span class="small monospace">5.3 </span><span class="small">&rsquo;abort&rsquo;</span><span class="small monospace"> which aborts the execution of </span><span class="small">pCode</span><span class="small monospace"> and returns control to the statement following </span><span class="small">&rsquo;do⦂ pCode onTrapDo⦂ pTrapCode&rsquo;</span><span class="small monospace">.<br></span><span class="tab" val="79"></span><span class="small">EH restart.</span><span class="small monospace">  (or)  </span><span class="small">EH continue.</span><span class="small monospace">  (or)  </span><span class="small">EH abort.</span><span class="small monospace"><br>6. The message </span><span class="small">&rsquo;do⦂onTrapDo⦂&rsquo;</span><span class="small monospace"> returns a result which can be specified during the execution of either  </span><span class="small">pCode</span><span class="small monospace"> or </span><span class="small">pTrapCode</span><span class="small monospace"> by the message </span><span class="small">&rsquo;result &larr; pResult&rsquo;</span><span class="small monospace">.  This result value can be retrieved anytime after it has been specified by sending the message </span><span class="small">&rsquo;result&rsquo;</span><span class="small monospace">.<br></span><span class="tab" val="79"></span><span class="small">EH result &larr; true.</span><span class="small monospace"><br></span><span class="tab" val="79"></span><span class="small">[ EH result ⇒ [ ... ] ].</span><span class="small monospace"><br>7. If </span><span class="small">pCode</span><span class="small monospace"> is terminated abnormally from a user notify window, the message </span><span class="small">&rsquo;release&rsquo;</span><span class="small monospace"> should be sent to return the ExceptionHandler object to its initial state.<br></span><span class="tab" val="79"></span><span class="small">EH release.</span><span class="small monospace"><br>8. Special error checking is included in the ExceptionHandler object to detect calls to </span><span class="small">pTrapCode</span><span class="small monospace"> during the execution of </span><span class="small">pTrapCode</span><span class="small monospace"> and other invalid conditions.</span><span class="small"><br>"<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">implementationNotes<br></span><span class="small">[<br>"<br>FIELDS<br></span><span class="small bold">fDoContext</span><span class="small"> : a Context that controls the execution of the message &rsquo;do⦂onTrapDo⦂&rsquo;.<br></span><span class="small bold">fCode</span><span class="small"> : a Context that controls the execution of the statements passed as the first parameter to &rsquo;do⦂onTrapDo⦂&rsquo;.<br></span><span class="small bold">fTrapCode</span><span class="small"> : a Context that controls the execution of the statements passed as the second parameter to &rsquo;do⦂onTrapDo⦂&rsquo;.<br></span><span class="small bold">fTrapCondition</span><span class="small"> : the object passed as the parameter to &rsquo;trap:&rsquo;.<br></span><span class="small bold">fResult</span><span class="small"> : the object that is the result of &rsquo;do⦂onTrapDo⦂&rsquo;.<br></span><span class="small bold">fPostTrapIndicator</span><span class="small"> : an Integer specifying the action to be taken after fTrapCode is executed.<br></span><span class="small bold">fStatusIndicator</span><span class="small"> : an Integer specifying the status of &rsquo;do⦂onTrapDo⦂&rsquo;; nil means &rsquo;do⦂onTrapDo⦂&rsquo; has not been invoked, 1 means fCode is active, 0 means fTrapCode is active.<br>"<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="medium bold"><br>CONTROL STRUCTURE</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">do⦂ pCode onTrapDo⦂ pTrapCode<br></span><span class="small">"...executes the set of statements in the block pCode and, conditionally, the set of statements in the block pTrapCode.  If &rsquo;trap&rsquo; or &rsquo;trap:&rsquo; is invoked during the execution of pCode, the execution is interrupted and pTrapCode is started.  When pTrapCode completes, pCode is either continued, restarted, or aborted, depending on which of &rsquo;continue&rsquo;, &rsquo;restart&rsquo;, and &rsquo;abort&rsquo; is sent during the execution of pTrapCode.  A notify window is created if &rsquo;trap&rsquo; or &rsquo;trap:&rsquo; is sent when pCode is not active, or if &rsquo;do⦂onTrapDo⦂&rsquo; is sent again before the first invocation completes."<br>[<br></span><span class="tab" val="79"></span><span class="small">[ fStatusIndicator ≠ nil ⇒ [ user notify: &rsquo;ExceptionHandler is active&rsquo;. ]  "1"<br></span><span class="tab" val="79"></span><span class="small">].<br></span><span class="tab" val="79"></span><span class="small">fStatusIndicator &larr; 1.  "2"<br></span><span class="tab" val="79"></span><span class="small">fCode &larr; pCode.  "3"<br></span><span class="tab" val="79"></span><span class="small">fTrapCode &larr; pTrapCode.  "4"<br></span><span class="tab" val="79"></span><span class="small">fDoContext &larr; thisContext.  "5"<br></span><span class="tab" val="79"></span><span class="small">fTrapCondition &larr; nil.  "6"<br></span><span class="tab" val="79"></span><span class="small">fResult &larr; true.  "7"<br></span><span class="tab" val="79"></span><span class="small">fCode eval.  "8"<br></span><span class="tab" val="79"></span><span class="small">self release.  "9"<br></span><span class="tab" val="79"></span><span class="small">⇑ fResult  "10"<br>]<br>"<br>1. If fStatusIndicator ≠ nil, then the previous invocation of &rsquo;do⦂onTrapDo⦂&rsquo; has not completed properly.  Create a notify window in this case.<br>2. Set fStatusIndicator to indicate pCode is active.<br>3. Save pCode for execution and restart.<br>4. Save pTrapCode for later execution.<br>5. Save the context of &rsquo;do⦂onTrapDo⦂&rsquo; for &rsquo;restart&rsquo; and &rsquo;abort&rsquo;.<br>6. Initialize the trap condition to nil.<br>7. Initialize the result of &rsquo;do⦂onTrapDo⦂ &rsquo; to true.<br>8. Execute pCode.<br>9. Set fields to nil to release saved contexts.<br>10. Return fResult (which may have been modified during the execution of pCode or pTrapCode).<br>"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="medium bold"><br>TRAP HANDLER</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">trap<br></span><span class="small">"...interrupts the execution of pCode and begins pTrapCode (from &rsquo;do⦂ pCode onTrapDo⦂ pTrapCode&rsquo;)."<br>[<br></span><span class="tab" val="79"></span><span class="small">self trap: nil.<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">trap: pTrapCondition<br></span><span class="small">"...interrupts the execution of pCode and begins pTrapCode (from &rsquo;do⦂ pCode onTrapDo⦂ pTrapCode&rsquo;).  The trap condition is set to pTrapCondition."<br></span><span class="tab" val="79"></span><span class="small">|tTrapCode i<br>[<br></span><span class="tab" val="79"></span><span class="small">[ fStatusIndicator<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">≡ nil ⇒ [ user notify: &rsquo;ExceptionHandler is not active&rsquo; ];  "1"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">= 0  ⇒ [ user notify: &rsquo;ExceptionHandler trap code is already active&rsquo; ]  "2"<br></span><span class="tab" val="79"></span><span class="small">].<br></span><span class="tab" val="79"></span><span class="small">fStatusIndicator &larr; 0.  "3"<br></span><span class="tab" val="79"></span><span class="small">fTrapCondition &larr; pTrapCondition.  "4"<br></span><span class="tab" val="79"></span><span class="small">fPostTrapIndicator &larr; 0.  "5"<br></span><span class="tab" val="79"></span><span class="small">tTrapCode &larr; fTrapCode cleancopy.  "6"<br></span><span class="tab" val="79"></span><span class="small">tTrapCode eval.  "7"<br></span><span class="tab" val="79"></span><span class="small">for⦂ i to: tTrapCode totalPT do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">[ fTrapCode setPT: i to: (tTrapCode getPT: i). ].  "8"<br></span><span class="tab" val="79"></span><span class="small">fStatusIndicator &larr; 1.  "9"<br></span><span class="tab" val="79"></span><span class="small">[ fPostTrapIndicator  "10"<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">= 0 ⇒ [ self restartCode. ];<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">= 1 ⇒ [ self abortCode. ];<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">= 2 ⇒ [ ]<br></span><span class="tab" val="79"></span><span class="small">].<br>]<br>"<br>1. If fStatusIndicator ≡ nil, then &rsquo;do⦂onTrapDo⦂&rsquo; has not been invoked and there is no trap code to execute.<br>2. if fStatusIndicator = 0, then fTrapCode is active.  This is an invalid state.<br>3. Set fStatusIndicator to indicate fTrapCode is active.<br>4. Set the trap condition to pTrapCondition.<br>5. Set the default post trap action to &rsquo;restart&rsquo;.<br>6. Make a new copy of the context, fTrapCode.<br>7. Execute the new copy of fTrapCode.<br>8. Set the parameters and temporaries in the context, fTrapCode to those of the executed copy.  This is done so that fCode will see any changes made to these variables by fTrapCode.<br>9. Set fStatusIndicator to indicate fTrapCode is not active.<br>10. Select the terminating action from the value of fPostTrapIndicator.<br>"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="medium bold"><br>POST TRAP SPECIFICATION</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">abort<br></span><span class="small">"...specifies that the code interrupted by &rsquo;trap&rsquo; or &rsquo;trap:&rsquo; will be aborted when the trap code completes.  Control will return to the statement that follows the invocation of &rsquo;do⦂onTrapDo⦂&rsquo;."<br>[<br></span><span class="tab" val="79"></span><span class="small">fPostTrapIndicator &larr; 1.<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">continue<br></span><span class="small">"...specifies that the code interrupted by &rsquo;trap&rsquo; or &rsquo;trap:&rsquo; will be continued when the trap code completes."<br>[<br></span><span class="tab" val="79"></span><span class="small">fPostTrapIndicator &larr; 2.<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">restart<br></span><span class="small">"...specifies that the code interrupted by &rsquo;trap&rsquo; or &rsquo;trap:&rsquo; will be restarted when the trap code completes."<br>[<br></span><span class="tab" val="79"></span><span class="small">fPostTrapIndicator &larr; 0.<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="medium bold"><br>MISC</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">result<br></span><span class="small">"...returns the result set by &rsquo;result&larr;&rsquo;."<br>[<br></span><span class="tab" val="79"></span><span class="small">⇑ fResult<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">result &larr; pResult<br></span><span class="small">"...sets the result value of &rsquo;do⦂onTrapDo⦂&rsquo; to pResult."<br>[<br></span><span class="tab" val="79"></span><span class="small">fResult &larr; pResult.<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">trapCondition<br></span><span class="small">"...returns the condition that was passed as the parameter to &rsquo;trap:&rsquo;."<br>[<br></span><span class="tab" val="79"></span><span class="small">⇑ fTrapCondition<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="medium bold"><br>POST TRAP ACTION (internal)</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">abortCode<br></span><span class="small">"...releases the context chain and returns fResult to the caller of &rsquo;do⦂onTrapDo⦂&rsquo;."<br></span><span class="tab" val="79"></span><span class="small">|tDoContextCaller<br>[<br></span><span class="tab" val="79"></span><span class="small">tDoContextCaller &larr; fDoContext caller.  "1"<br></span><span class="tab" val="79"></span><span class="small">thisContext caller releaseTo: tDoContextCaller.  "2"<br></span><span class="tab" val="79"></span><span class="small">self release.  "3"<br></span><span class="tab" val="79"></span><span class="small">tDoContextCaller push: fResult.  "4"<br></span><span class="tab" val="79"></span><span class="small">Top run: tDoContextCaller at: Top currentPriority.  "5"<br>]<br>"<br>1. Get the caller of &rsquo;do⦂onTrapDo⦂&rsquo;.<br>2. Release the context chain from the caller of thisContext up to the caller of &rsquo;do⦂onTrapDo⦂&rsquo;.<br>3. Set fields to nil to clean up pointers to unwanted contexts.<br>4. Return fResult to the caller of &rsquo;do⦂onTrapDo⦂&rsquo;.<br>5. Run the caller of &rsquo;do⦂onTrapDo⦂&rsquo;.<br>"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">release<br></span><span class="small">"...resets the exception handler to its initial condition."<br>[<br></span><span class="tab" val="79"></span><span class="small">fCode &larr; nil.<br></span><span class="tab" val="79"></span><span class="small">fTrapCode &larr; nil.<br></span><span class="tab" val="79"></span><span class="small">fDoContext &larr; nil.<br></span><span class="tab" val="79"></span><span class="small">fStatusIndicator &larr; nil.<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">restartCode<br></span><span class="small">"...releases the context chain and restarts the block of statements passed as the first parameter to &rsquo;do⦂onTrapDo⦂&rsquo;."<br>[<br></span><span class="tab" val="79"></span><span class="small">thisContext caller releaseTo: fCode.  "1"<br></span><span class="tab" val="79"></span><span class="small">fCode restart.  "2"<br></span><span class="tab" val="79"></span><span class="small">fCode push: fDoContext.  "3"<br></span><span class="tab" val="79"></span><span class="small">Top run: fCode at: Top currentPriority.  "4"<br>]<br>"<br>1. Release the context chain from the caller of thisContext up to fCode.<br>2. Resets the pc and stack pointer of fCode.<br>3. Push the return context of fCode onto its tempframe.<br>4. Run fCode.<br>"</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="medium bold"><br>TEST AND DIAGNOSTIC</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">test  </span><span class="small">"ExceptionHandler new test."</span><span class="small bold"><br></span><span class="tab" val="79"></span><span class="small">| guard i<br>[<br></span><span class="tab" val="79"></span><span class="small">guard &larr; ExceptionHandler new.  user clear.  i &larr; 0.<br></span><span class="tab" val="79"></span><span class="small">guard do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">[ user show: i asString.  i &larr; i+1.  guard trap: i.  user show: &rsquo; end&rsquo;. ]<br></span><span class="tab" val="79"></span><span class="small">onTrapDo⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">[ i &lt; 10 ⇒ [ guard restart ]  guard continue ].<br></span><span class="tab" val="79"></span><span class="small">user show: &rsquo; done.&rsquo;.  user cr.  ⇑ guard result<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">testTransaction  </span><span class="small">"ExceptionHandler new testTransaction."</span><span class="small bold"><br></span><span class="tab" val="79"></span><span class="small">| e i max f<br>[<br></span><span class="tab" val="79"></span><span class="small">e &larr; ExceptionHandler new.  i &larr; 0.  max &larr; 5.  dpj exceptionHandler: e.<br></span><span class="tab" val="79"></span><span class="small">dpj open.  f &larr; dpj file: &rsquo;test.test&rsquo;.<br></span><span class="tab" val="79"></span><span class="small">e do⦂ [f reset. until⦂ [ f end ] do⦂ [ user show: (f next) inString. ]. ]<br></span><span class="tab" val="79"></span><span class="small">onTrapDo⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">[ user cr;  show: &rsquo;Juniper not responding&rsquo;.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">f release.  dpj release.  i &larr; i+1.  [ i &lt; max ⇒ [ e restart. ] e abort ]. ].<br></span><span class="tab" val="79"></span><span class="small">user cr;  show: &rsquo;done&rsquo;.  f close.  dpj close.<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="medium bold"><br>EXAMPLES</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">juniperTest  </span><span class="small">"ExceptionHandler new juniperTest."</span><span class="small bold"><br></span><span class="tab" val="79"></span><span class="small">| e i max f<br>[<br></span><span class="tab" val="79"></span><span class="small">e &larr; ExceptionHandler new.  i &larr; 0.  max &larr; 5.  dpj exceptionHandler: e.<br></span><span class="tab" val="79"></span><span class="small">dpj open.  f &larr; dpj file: &rsquo;test.test&rsquo;.<br></span><span class="tab" val="79"></span><span class="small">e do⦂ [f reset. until⦂ [ f end ] do⦂ [ user show: (f next) inString. ]. ]<br></span><span class="tab" val="79"></span><span class="small">onTrapDo⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">[ user cr;  show: &rsquo;Juniper not responding&rsquo;.<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">f release.  dpj release.  i &larr; i+1.  [ i &lt; max ⇒ [ e restart. ] e abort ]. ].<br></span><span class="tab" val="79"></span><span class="small">user cr;  show: &rsquo;done&rsquo;.  f close.  dpj close.<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small bold">loopTest  </span><span class="small">"ExceptionHandler new loopTest."</span><span class="small bold"><br></span><span class="tab" val="79"></span><span class="small">| guard i<br>[<br></span><span class="tab" val="79"></span><span class="small">guard &larr; ExceptionHandler new.  user clear.  i &larr; 0.<br></span><span class="tab" val="79"></span><span class="small">guard do⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">[ user show: i asString.  i &larr; i+1.  guard trap: i.  user show: &rsquo; end&rsquo;. ]<br></span><span class="tab" val="79"></span><span class="small">onTrapDo⦂<br></span><span class="tab" val="79"></span><span class="tab" val="79"></span><span class="small">[ i &lt; 10 ⇒ [ guard restart ]  guard continue ].<br></span><span class="tab" val="79"></span><span class="small">user show: &rsquo; done.&rsquo;.  user cr.  ⇑ guard result<br>]</span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small"></span></div>
<div style="width: 442pt; margin-left: 84pt; margin-top: 0pt; text-align: left">
<span class="small">SystemOrganization classify: ↪ExceptionHandler under: &rsquo;ExceptionHandling&rsquo;.</span></div>
<span class="small">
  </body>
</html>
